<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:pro="http://www.liquibase.org/xml/ns/pro" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd
        http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-latest.xsd">
	<!-- Create Tables -->
	<changeSet id="create-logs-integrations-logs-table" author="serasoft">
		<createTable tableName="integrations_logs">
			<column name="id" type="varchar(48)" remarks="Table's surrogate primary key">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="integrations_processes_id" type="varchar(48)" remarks="Reference to started process.">
				<constraints nullable="false" />
			</column>
			<column name="proc_status" type="char(1)" remarks="Process execution status">
				<constraints nullable="false" />
			</column>
			<column name="max_severity" type="integer" defaultValueNumeric="0" remarks="Maximum severity raised in an event happened during process execution."/>
			<column name="date_started" type="timestamp" remarks="Process start timestamp">
				<constraints nullable="false" />
			</column>
			<column name="date_finished" type="timestamp" remarks="Process finished timestamp"/>
			<column name="log_file_ref" type="varchar(255)" remarks="Reference to the log file generated by the process.">
				<constraints nullable="false" />
			</column>
			<column name="username" type="varchar(32)" remarks="Operating system username under which the process is running"/>
			<column name="host" type="varchar(64)" remarks="THe host where the process run"/>
		</createTable>
	</changeSet>
	<changeSet id="create-logs-integrations-log-events-table" author="serasoft">
		<createTable tableName="integrations_log_events">
			<column name="id" type="varchar(48)">
				<constraints primaryKey="true" nullable="false" />
			</column>
			<column name="date_event" type="timestamp" defaultValueComputed="CURRENT_DATE">
				<constraints nullable="false" />
			</column>
			<column name="integrations_logs_id" type="varchar(48)">
				<constraints nullable="false" />
			</column>
			<column name="event_subcategory_id" type="varchar(48)">
				<constraints nullable="false" />
			</column>
			<column name="event_severity_id" type="varchar(48)">
				<constraints nullable="false" />
			</column>
			<column name="source_sys_code" type="varchar(32)" />
			<column name="source_sys_row_ref" type="varchar(50)" />
			<column name="event_text" type="text">
				<constraints nullable="false" />
			</column>
			<column name="event_data" type="text" />
		</createTable>
	</changeSet>
</databaseChangeLog>
